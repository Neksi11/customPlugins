---
name: analyze-animation
description: Analyze existing animation code, identify performance issues, suggest improvements, and compare GSAP vs Motion.dev vs CSS approaches
arguments:
  - name: code
    description: Animation code to analyze
    required: true
  - name: focus
    description: Analysis focus (performance, accessibility, best-practices, comparison, easing)
    required: false
    default: all
---

Analyze animation code and provide expert feedback and improvements.

## Input Parameters

- **Code**: The animation code snippet you want analyzed
- **Focus**: performance, accessibility, best-practices, comparison, easing, or all

## Analysis Categories

### Performance Analysis
- Check for animating expensive properties (layout thrashing)
- Verify GPU-accelerated properties usage
- Identify opportunities for batching
- Check for memory leaks (uncleaned animations)
- Suggest `will-change` usage where appropriate

### Accessibility Analysis
- Check `prefers-reduced-motion` handling
- Verify animation duration limits
- Identify flashing/pulsing that may cause issues
- Suggest focus management after animations

### Best Practices
- Evaluate easing function choice for context
- Check animation duration appropriateness
- Verify timeline/tickle structure
- Suggest refactoring opportunities
- Compare approach to industry standards

### Easing Analysis
When focus is on easing:
- Evaluate if current easing fits the interaction
- Suggest MCP-generated bounce/spring easing alternatives
- Recommend easing parameters (bounce, duration)
- Provide concrete easing function examples using MCP tools

### Library Comparison
- If GSAP: Suggest Motion.dev or CSS alternatives if better suited
- If Motion.dev: Suggest GSAP or CSS alternatives for complex cases
- If CSS: Recommend library when complexity warrants it
- Evaluate if the chosen library fits the use case

## Output Format

1. **Overall Assessment** - Score (1-10) with summary
2. **Issues Found** - Specific problems with line references
3. **Suggestions** - Concrete improvements with code examples
4. **Optimized Code** - Refactored version if significant changes needed
5. **Learning Notes** - Key takeaways for future animations

## MCP Integration

When analyzing easing or suggesting improvements, this command may:
- Generate bounce easing using `mcp__motion__generate-css-bounce-easing`
- Generate spring easing using `mcp__motion__generate-css-spring`
- Provide actual easing values you can use immediately

## Example

```
/analyze-animation
```css
.dropdown {
  transition: transform 0.3s ease-in-out;
}
```
focus: easing
```

**Assessment**: The easing is generic and doesn't add character to the dropdown.

**Suggestion**: Use bounce easing for a lively feel:
```css
.dropdown {
  /* Generated by motion MCP server */
  transition: transform 1s linear(<easing-function>);
}
```
